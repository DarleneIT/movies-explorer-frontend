{"ast":null,"code":"var _jsxFileName = \"/Users/darlene/Desktop/dev/diploma/movies-explorer-frontend/frontend/src/components/Movies/Movies.js\",\n  _s = $RefreshSig$();\n//Реакт\nimport React, { useEffect, useCallback, useState } from \"react\";\n\n//Компоненты\nimport Header from \"../Header/Header.js\";\nimport SearchForm from \"./SearchForm/SearchForm.js\";\nimport MoviesCardList from \"./MoviesCardList/MoviesCardList.js\";\nimport Footer from \"../Footer/Footer.jsx\";\n\n//Стили\nimport \"./Movies.css\";\n\n//Апи\nimport moviesApi from \"../../utils/MoviesApi.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Movies({\n  isLoggedIn,\n  savedMovies,\n  addMovie,\n  setIsError\n}) {\n  _s();\n  function findMovies() {\n    localStorage.setItem(\"searchedMovie\", result);\n    localStorage.setItem(\"shortMovies\", isShortMovies);\n  }\n  const [allMovies, setAllMovies] = useState([]);\n  const [filteredMovies, setFilteredMovies] = useState([]);\n  const [searchedMouvie, setSearchedMovie] = useState('');\n  const [isCheck, setIsCheck] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [serverError, setServerError] = useState(false);\n  const [firstEntrance, setFirstEntrance] = useState(true);\n  const filter = useCallback((search, isCheck, movies) => {\n    localStorage.setItem('movie', JSON.stringify(search));\n    localStorage.setItem('shorts', JSON.stringify(isCheck));\n    localStorage.setItem('allmovies', JSON.stringify(movies));\n    setSearchedMovie(search);\n    setFilteredMovies(movies.filter(movie => {\n      const searchName = movie.nameRU.toLowerCase().includes(search.toLowerCase());\n      return isCheck ? searchName && movie.duration <= 52 : searchName;\n    }));\n  }, []);\n  function searchMovies(search) {\n    if (allMovies.length === 0) {\n      setIsLoading(true);\n      moviesApi.getMovies().then(res => {\n        setAllMovies(res);\n        setIsCheck(false);\n        setServerError(false);\n        setFirstEntrance(false);\n        filter(search, isCheck, res);\n      }).catch(err => {\n        setServerError(true);\n        console.error(`Ошибка при поиске фильмов ${err}`);\n      }).finally(() => setIsLoading(false));\n    } else {\n      filter(search, isCheck, allMovies);\n    }\n  }\n  useEffect(() => {\n    if (localStorage.allmovies && localStorage.shorts && localStorage.movie) {\n      const movies = JSON.parse(localStorage.allmovies);\n      const search = JSON.parse(localStorage.movie);\n      const isCheck = JSON.parse(localStorage.shorts);\n      setServerError(false);\n      setFirstEntrance(false);\n      setSearchedMovie(search);\n      setIsCheck(isCheck);\n      setAllMovies(movies);\n      filter(search, isCheck, movies);\n    }\n  }, [filter]);\n  function changeShort() {\n    if (isCheck) {\n      setIsCheck(false);\n      filter(searchedMouvie, false, allMovies);\n      localStorage.setItem('shorts', JSON.stringify(false));\n    } else {\n      setIsCheck(true);\n      filter(searchedMouvie, true, allMovies);\n      localStorage.setItem('shorts', JSON.stringify(true));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      isLoggedIn: isLoggedIn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"movies\",\n      children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n        isCheck: isCheck,\n        searchMovies: searchMovies,\n        searchedMovie: searchedMouvie,\n        changeShort: changeShort,\n        setIsError: setIsError,\n        firstEntrance: firstEntrance\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(MoviesCardList, {\n        movies: filteredMovies,\n        addMovie: addMovie,\n        savedMovies: savedMovies,\n        isLoading: isLoading,\n        serverError: serverError,\n        firstEntrance: firstEntrance\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"movies__button\",\n        type: \"button\",\n        children: \"\\u0415\\u0449\\u0451\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(Movies, \"xDcDdTImrKp/MF9tDZ7nHwAJlGU=\");\n_c = Movies;\nexport default Movies;\nvar _c;\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"names":["React","useEffect","useCallback","useState","Header","SearchForm","MoviesCardList","Footer","moviesApi","jsxDEV","_jsxDEV","Fragment","_Fragment","Movies","isLoggedIn","savedMovies","addMovie","setIsError","_s","findMovies","localStorage","setItem","result","isShortMovies","allMovies","setAllMovies","filteredMovies","setFilteredMovies","searchedMouvie","setSearchedMovie","isCheck","setIsCheck","isLoading","setIsLoading","serverError","setServerError","firstEntrance","setFirstEntrance","filter","search","movies","JSON","stringify","movie","searchName","nameRU","toLowerCase","includes","duration","searchMovies","length","getMovies","then","res","catch","err","console","error","finally","allmovies","shorts","parse","changeShort","children","fileName","_jsxFileName","lineNumber","columnNumber","className","searchedMovie","type","_c","$RefreshReg$"],"sources":["/Users/darlene/Desktop/dev/diploma/movies-explorer-frontend/frontend/src/components/Movies/Movies.js"],"sourcesContent":["//Реакт\nimport React, { useEffect, useCallback, useState } from \"react\";\n\n//Компоненты\nimport Header from \"../Header/Header.js\";\nimport SearchForm from \"./SearchForm/SearchForm.js\";\nimport MoviesCardList from \"./MoviesCardList/MoviesCardList.js\";\nimport Footer from \"../Footer/Footer.jsx\";\n\n//Стили\nimport \"./Movies.css\";\n\n//Апи\nimport moviesApi from \"../../utils/MoviesApi.js\"\n\n\nfunction Movies({ isLoggedIn, savedMovies, addMovie, setIsError }) {\n\nfunction findMovies() {\n  localStorage.setItem(\"searchedMovie\", result)\n  localStorage.setItem(\"shortMovies\", isShortMovies)\n}\n\n  const [allMovies, setAllMovies] = useState([])\n  const [filteredMovies, setFilteredMovies] = useState([])\n  const [searchedMouvie, setSearchedMovie] = useState('')\n  const [isCheck, setIsCheck] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const [serverError, setServerError] = useState(false)\n  const [firstEntrance, setFirstEntrance] = useState(true)\n\n  const filter = useCallback((search, isCheck, movies) => {\n    localStorage.setItem('movie', JSON.stringify(search))\n    localStorage.setItem('shorts', JSON.stringify(isCheck))\n    localStorage.setItem('allmovies', JSON.stringify(movies))\n    setSearchedMovie(search)\n    setFilteredMovies(movies.filter((movie) => {\n      const searchName = movie.nameRU.toLowerCase().includes(search.toLowerCase())\n      return isCheck ? (searchName && movie.duration <= 52) : searchName\n    }))\n  }, [])\n\n  function searchMovies(search) {\n    if (allMovies.length === 0) {\n      setIsLoading(true)\n      moviesApi.getMovies()\n        .then((res) => {\n          setAllMovies(res)\n          setIsCheck(false)\n          setServerError(false)\n          setFirstEntrance(false)\n          filter(search, isCheck, res)\n        })\n        .catch(err => {\n          setServerError(true)\n          console.error(`Ошибка при поиске фильмов ${err}`)\n        })\n        .finally(() => setIsLoading(false))\n    } else {\n      filter(search, isCheck, allMovies)\n    }\n  }\n\n  useEffect(() => {\n    if (localStorage.allmovies && localStorage.shorts && localStorage.movie) {\n      const movies = JSON.parse(localStorage.allmovies)\n      const search = JSON.parse(localStorage.movie)\n      const isCheck = JSON.parse(localStorage.shorts)\n      setServerError(false)\n      setFirstEntrance(false)\n      setSearchedMovie(search)\n      setIsCheck(isCheck)\n      setAllMovies(movies)\n      filter(search, isCheck, movies)\n    }\n  }, [filter])\n\n  function changeShort() {\n    if (isCheck) {\n      setIsCheck(false)\n      filter(searchedMouvie, false, allMovies)\n      localStorage.setItem('shorts', JSON.stringify(false))\n    } else {\n      setIsCheck(true)\n      filter(searchedMouvie, true, allMovies)\n      localStorage.setItem('shorts', JSON.stringify(true))\n    }\n  }\n\n  return (\n    <> \n    <Header isLoggedIn={isLoggedIn} />\n    <main className=\"movies\">\n      <SearchForm \n      isCheck={isCheck}\n      searchMovies={searchMovies}\n      searchedMovie={searchedMouvie}\n      changeShort={changeShort}\n      setIsError={setIsError}\n      firstEntrance={firstEntrance}\n      />\n      <MoviesCardList \n      movies={filteredMovies}\n      addMovie={addMovie}\n      savedMovies={savedMovies}\n      isLoading={isLoading}\n      serverError={serverError}\n      firstEntrance={firstEntrance}\n      />\n      <button className=\"movies__button\" type=\"button\">\n        Ещё\n      </button>\n    </main>\n    <Footer />\n    </>\n  );\n}\n\nexport default Movies;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}