{"ast":null,"code":"class ApiMain {\n  constructor(options) {\n    this._url = options.url;\n  }\n  _checkResponse(res) {\n    if (res.ok) {\n      return Promise.resolve(res.json());\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n  _request(path, options) {\n    return fetch(`${this._url}${path}`, options).then(this._checkResponse);\n  }\n\n  //Регистрация и авторизация\n  registration({\n    name,\n    email,\n    password\n  }) {\n    return this._request(\"/signup\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name: name,\n        email: email,\n        password: password\n      })\n    });\n  }\n  authorization({\n    email,\n    password\n  }) {\n    return this._request(\"/signin\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    });\n  }\n\n  //Получение данных пользователя\n  getUser(token) {\n    return this._request(\"/users/me\", {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    });\n  }\n\n  //Редактирование данных пользователя (проверить)\n  editUserInfo(name, email, token) {\n    return this._request('/users/me', {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        name: name,\n        email: email\n      })\n    });\n  }\n\n  //Получение фильмов\n  getMovies(token) {\n    return this._request(\"/movies\", {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    });\n  }\n\n  //Добавление и удаление фильмов\n  likeMovie(data, token) {\n    return this._request(\"/movies\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        country: data.country,\n        description: data.description,\n        director: data.director,\n        duration: data.duration,\n        description: data.description,\n        year: data.year,\n        image: `https://api.nomoreparties.co${data.image.url}`,\n        trailerLink: data.trailerLink,\n        thumbnail: `https://api.nomoreparties.co${data.image.formats.thumbnail.url}`,\n        movieId: data.id,\n        nameRU: data.nameRU,\n        nameEN: data.nameEN\n      })\n    });\n  }\n  dislikeMovie(cardId, token) {\n    return this._request(`/movies/${cardId}`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n  }\n}\nexport const apiMain = new ApiMain({\n  url: \"http://localhost:3000\"\n  //url: \"https://movies.nomoredomainsrocks.ru\",\n});","map":{"version":3,"names":["ApiMain","constructor","options","_url","url","_checkResponse","res","ok","Promise","resolve","json","reject","status","_request","path","fetch","then","registration","name","email","password","method","headers","body","JSON","stringify","authorization","getUser","token","editUserInfo","getMovies","likeMovie","data","country","description","director","duration","year","image","trailerLink","thumbnail","formats","movieId","id","nameRU","nameEN","dislikeMovie","cardId","Authorization","apiMain"],"sources":["/Users/darlene/Desktop/dev/diploma/movies-explorer-frontend/frontend/src/utils/MainApi.js"],"sourcesContent":["class ApiMain {\n  constructor(options) {\n    this._url = options.url;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return Promise.resolve(res.json());\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n\n  _request(path, options) {\n    return fetch(`${this._url}${path}`, options).then(this._checkResponse);\n  }\n\n  //Регистрация и авторизация\n  registration({ name, email, password }) {\n    return this._request(\"/signup\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: name,\n        email: email,\n        password: password,\n      }),\n    });\n  }\n\n  authorization({ email, password }) {\n    return this._request(\"/signin\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n      }),\n    });\n  }\n\n  //Получение данных пользователя\n  getUser(token) {\n    return this._request(\"/users/me\", {\n      headers: {\n        authorization: `Bearer ${token}`,\n      },\n    });\n  }\n\n  //Редактирование данных пользователя (проверить)\n  editUserInfo(name, email, token) {\n    return this._request('/users/me', {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({\n        name: name,\n        email: email,\n      }),\n    });\n  }\n\n  //Получение фильмов\n  getMovies(token) {\n    return this._request(\"/movies\", {\n      headers: {\n        authorization: `Bearer ${token}`,\n      },\n    });\n  }\n\n  //Добавление и удаление фильмов\n  likeMovie(data, token) {\n    return this._request(\"/movies\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({\n        country: data.country,\n        description: data.description,\n        director: data.director,\n        duration: data.duration,\n        description: data.description,\n        year: data.year,\n        image: `https://api.nomoreparties.co${data.image.url}`,\n        trailerLink: data.trailerLink,\n        thumbnail: `https://api.nomoreparties.co${data.image.formats.thumbnail.url}`,\n        movieId: data.id,\n        nameRU: data.nameRU,\n        nameEN: data.nameEN,\n      }),\n    });\n  }\n\n  dislikeMovie(cardId, token) {\n    return this._request(`/movies/${cardId}`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n  }\n}\n\nexport const apiMain = new ApiMain({\n  url: \"http://localhost:3000\",\n  //url: \"https://movies.nomoredomainsrocks.ru\",\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}